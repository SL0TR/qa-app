(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),s=a.n(c),o=(a(65),a(66),a(105)),u=a(10),i=a(21),l=(a(67),a(15)),m=a(3),p=a.n(m),f=a(7),d=a(8),b=a(50),v=a.n(b).a.create({withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});v.interceptors.response.use(null,function(e){e.response&&e.response.status>=400&&e.response.status<500||u.b.error(e.message);var t=e.response.data.msg||e.message;return console.log(t),u.b.error(t),Promise.reject(e)});var E={get:v.get,post:v.post,delete:v.delete,put:v.put,all:v.all},w="/api/auth",h="/api/me",x="/api/signout";function g(e){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.post(w,t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.get(h));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.post(x));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){window.localStorage.userId=e._id,window.localStorage.userEmail=e.email,window.localStorage.userIsAdmin=e.isAdmin}var N=r.a.createContext(),q=function(e){var t=e.children,a=(e.history,Object(n.useState)(null)),c=Object(d.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)([]),i=Object(d.a)(u,2),l=i[0],m=i[1],b=Object(n.useState)(!1),v=Object(d.a)(b,2),E=v[0],w=v[1],h=function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:a=e.sent,(n=a.data.user)&&(C(n),o(n),window.location.href="/");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(N.Provider,{value:{onSubmit:h,currUser:s,setCurrUser:o,setQuestions:m,questions:l,isAdmin:E,setIsAdmin:w}},t)},I=a(103),A=function(){var e=Object(n.useContext)(N).currUser;return r.a.createElement("header",{className:"bg-dark p-5 mb-5"},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h1",{className:"display-4 text-white mt-5 mb-2"},"ABC Limited"),r.a.createElement("p",{className:"lead mb-5 text-white-50"},"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Non possimus ab labore provident mollitia. Id assumenda voluptate earum corporis facere quibusdam quisquam iste ipsa cumque unde nisi, totam quas ipsam."),e&&r.a.createElement(I.a,{as:l.b,to:"/questions",variant:"outline-light",className:"outline text-black"},"Visit Out Questions page")))))},P=a(104),_=a(57),U=a(106),L=a(56),B=function(e){var t=e.onSubmit,a=Object(L.a)(),n=a.handleSubmit,c=a.register,s=a.errors;return r.a.createElement(U.a,{onSubmit:n(t)},r.a.createElement(U.a.Group,{controlId:"formBasicEmail"},r.a.createElement(U.a.Control,{name:"email",placeholder:"Enter Email",ref:c({required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"invalid email address"}})}),s.email&&s.email.message),r.a.createElement(U.a.Group,{controlId:"formBasicPassword"},r.a.createElement(U.a.Control,{placeholder:"Enter Password",type:"password",name:"password",ref:c({required:"Required",maxLength:10,minLength:3})}),s.password&&"required"===s.password.type&&"Your input is required",s.password&&"maxLength"===s.password.type&&"Your input exceeded max character if 10",s.password&&"minLength"===s.password.type&&"Your input needs to be more than 2 characters"),r.a.createElement(P.a,{className:"justify-content-md-center"},r.a.createElement(_.a,{xs:12},r.a.createElement(I.a,{style:{width:"100%"},variant:"dark",type:"submit"},"Submit"))))},Q=function(){var e=Object(n.useContext)(N),t=e.onSubmit,a=e.currUser;return Object(n.useEffect)(function(){a&&Object(u.b)("Successfully Signed In!")},[a]),r.a.createElement(P.a,{className:"justify-content-md-center mt-5"},r.a.createElement(_.a,{xs:12},r.a.createElement("h2",{className:"text-center mb-5"},"Login")),r.a.createElement(_.a,{lg:4,xs:12},r.a.createElement(B,{onSubmit:t})))},D="/api/users";function R(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.post(D,t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.get(D,t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var K=function(e){var t=e.history,a=Object(n.useContext)(N),c=a.currUser,s=a.setCurrUser;Object(n.useEffect)(function(){c&&t.push("/")},[c,t]);var o=function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:a=e.sent,(n=a.data)&&(Object(u.b)("User registration successful!"),s(n.user));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(P.a,{className:"justify-content-md-center mt-5"},r.a.createElement(_.a,{xs:12},r.a.createElement("h2",{className:"text-center mb-5"},"User Registration")),r.a.createElement(_.a,{xs:4},r.a.createElement(B,{onSubmit:o})))},T=a(109),Z=a(107),F=function(){var e=Object(n.useContext)(N),t=e.currUser,a=e.setCurrUser,c=e.isAdmin,s=e.setIsAdmin,o=function(){var e=Object(f.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,(n=t.data)&&(Object(u.b)(n.msg),a(null),window.localStorage.userId="",window.localStorage.userEmail="",window.localStorage.userIsAdmin="",window.location.href="/login");case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:t=e.sent,a=t.data,s(a.isAdmin),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("no login",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))()},[s]),r.a.createElement(T.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(T.a.Brand,{to:"/",as:l.b},"ABC Limited"),r.a.createElement(T.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(T.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Z.a,{className:"ml-auto"},r.a.createElement(Z.a.Item,null,r.a.createElement(l.c,{exact:!0,activeClassName:"active",className:"nav-link mr-3",to:"/"},"Home")),t&&r.a.createElement(Z.a.Item,null,r.a.createElement(l.c,{exact:!0,activeClassName:"active",className:"nav-link mr-3",to:"/questions"},"Questions")),c&&r.a.createElement(Z.a.Item,null,r.a.createElement(l.c,{exact:!0,activeClassName:"active",className:"nav-link mr-3",to:"/users"},"Users")),!t&&r.a.createElement(Z.a.Item,null,r.a.createElement(l.c,{exact:!0,activeClassName:"active",className:"nav-link mr-3",to:"/login"},"Login")),!t&&r.a.createElement(Z.a.Item,null,r.a.createElement(l.c,{exact:!0,activeClassName:"active",className:"nav-link",to:"/register"},"Register")),t&&r.a.createElement(Z.a.Item,null,r.a.createElement(Z.a.Link,{onClick:o},"Sign Out")))))},J=a(20),W=a(16),$="/api/questions";function V(e){return E.post($,e)}function z(){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.get($));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.delete($+"/".concat(t)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var te=function(e){var t=e.question,a=e.index,c=e.admin,s=e.state,o=e.handleChange,i=Object(n.useContext)(N),l=i.questions,m=i.setQuestions,d=function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:a=e.sent,n=a.data._id,r=Object(J.a)(l).filter(function(e){return e._id!==n}),m(r),Object(u.b)("Question Deleted!");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(P.a,{className:"justify-content-center align-items-center mb-3"},r.a.createElement(_.a,{lg:c?10:12,xs:12},r.a.createElement(U.a.Label,null,a+1+". "+t.text),!c&&r.a.createElement(U.a.Control,{value:s[t._id],name:t._id,onChange:o,type:"text",placeholder:"Enter answer"})),c&&r.a.createElement(_.a,{lg:2,xs:12,className:"mb-2"},r.a.createElement(I.a,{style:{width:"100%"},onClick:function(){d(t._id)},variant:"danger"},"Delete")))},ae="/api/answers";function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.post(ae+"/useranswer",t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach(function(t){Object(W.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var oe=function(e){var t=e.history,a=Object(n.useContext)(N),c=a.questions,s=a.setQuestions,o=a.currUser,i=a.setIsAdmin,l=a.isAdmin,m=Object(n.useState)(""),b=Object(d.a)(m,2),v=b[0],w=b[1],h=Object(n.useState)({}),x=Object(d.a)(h,2),g=x[0],O=x[1];function y(e){var t=e.target,a=t.name,n=t.value;O(function(e){return se({},e,Object(W.a)({},a,n))})}Object(n.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:a=e.sent,n=a.data,i(n.isAdmin),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("no login",e.t0),t.push("/");case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},[t,i]),Object(n.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var t,a,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,(a=t.data)&&(n=window.localStorage.userId,(r=(r=Object(J.a)(a.questions)).map(function(e){var t=e.answers.filter(function(e){return e.author._id===n});return se({},e,{answers:t})})).forEach(function(e){e.answers.forEach(function(e){O(function(t){return se({},t,Object(W.a)({},e.question,e.text))})})}),s(r));case 5:case"end":return e.stop()}},e)}))()},[s]);var k=function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,V({text:v});case 3:a=e.sent,(n=a.data)&&(w(""),s(function(e){return[n].concat(Object(J.a)(e))}),Object(u.b)("New Question Created!"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),a=[],g)r={text:g[n],author:o._id,question:n},a.push(r);return c=a.map(function(e){return t=e,E.post(ae,t);var t}),e.next=6,Promise.all(c);case 6:e.sent&&Object(u.b)("Submission Successful!");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null,l&&r.a.createElement(_.a,{xs:12},r.a.createElement(U.a,{onSubmit:function(e){k(e)}},r.a.createElement(P.a,null,r.a.createElement(_.a,{lg:10,xs:12},r.a.createElement(U.a.Group,{controlId:"formBasicEmail"},r.a.createElement(U.a.Control,{value:v,onChange:function(e){w(e.target.value)},type:"text",placeholder:"Enter Your Question"}))),r.a.createElement(_.a,{lg:2,xs:12},r.a.createElement(I.a,{style:{width:"100%"},variant:"dark",type:"submit"},"Submit"))))),r.a.createElement(_.a,{xs:12,className:"mt-5"},r.a.createElement(U.a,{onSubmit:S},c.map(function(e,t){return r.a.createElement(te,{handleChange:y,state:g,setState:O,key:t,index:t,admin:l,question:e})}),!l&&r.a.createElement(I.a,{className:"mt-2",type:"submit",variant:"dark"},"Submit")))))},ue=function(e){var t=e.children,a=Object(n.useContext)(N),c=a.setCurrUser,s=a.setIsAdmin;return Object(n.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(window.localStorage.userId&&window.localStorage.userEmail&&window.localStorage.userIsAdmin)){e.next=4;break}c({_id:window.localStorage.userId,email:window.localStorage.userEmail,isAdmin:window.localStorage.userIsAdmin}),e.next=9;break;case 4:return e.next=6,j();case 6:t=e.sent,(a=t.data)&&(c(a),s(a.isAdmin));case 9:case"end":return e.stop()}},e)}))()},[c,s]),r.a.createElement(r.a.Fragment,null,t," ")},ie=a(108),le=a(110),me=function(e){var t=e.ques,a=e.user,c=Object(n.useState)(""),s=Object(d.a)(c,2),o=s[0],u=s[1];return Object(n.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={questionId:t._id,userId:a._id},e.next=3,ne(n);case 3:(r=e.sent)&&r.data?u(r.data.text):u("No answer yet");case 5:case"end":return e.stop()}},e)}))()},[t,a]),r.a.createElement(P.a,null,r.a.createElement(_.a,{xs:12},r.a.createElement("p",{className:"lead"},r.a.createElement("em",null," ",t.text?t.text:"loading..."," ")),r.a.createElement("blockquote",{className:"blockquote"},r.a.createElement("p",{className:"mb-0"},o||"loading..."))))},pe=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useContext)(N),o=s.questions,u=s.setQuestions;return Object(n.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var t,a,n,r,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[G(),z()],e.next=3,Promise.all(t);case 3:a=e.sent,n=Object(d.a)(a,2),r=n[0],s=n[1],r&&c(r.data.users),s&&u(s.data.questions);case 9:case"end":return e.stop()}},e)}))()},[u]),r.a.createElement(P.a,null,r.a.createElement(_.a,{xs:12},r.a.createElement(ie.a,{defaultActiveKey:"0"},a.map(function(e,t){return r.a.createElement(le.a,{key:e._id},r.a.createElement(le.a.Header,{style:{cursor:"pointer"}},r.a.createElement(ie.a.Toggle,{as:"h4",eventKey:t.toString()},"\u263a ",e.email)),r.a.createElement(ie.a.Collapse,{eventKey:t.toString()},r.a.createElement(le.a.Body,null,o&&o.map(function(t){return r.a.createElement(me,{user:e,key:t._id,ques:t})}))))}))))},fe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,function(e){var t=e.history;return r.a.createElement(q,{history:t},r.a.createElement(ue,null,r.a.createElement(u.a,{position:"top-center",pauseOnHover:!0,closeOnClick:!0,autoClose:2e3}),r.a.createElement(F,null),r.a.createElement(o.a,{className:"py-5"},r.a.createElement(i.a,{exact:!0,path:"/",component:A}),r.a.createElement(i.a,{exact:!0,path:"/login",component:Q}),r.a.createElement(i.a,{exact:!0,path:"/users",component:pe}),r.a.createElement(i.a,{exact:!0,path:"/questions",component:oe}),r.a.createElement(i.a,{exact:!0,path:"/register",component:K}))))}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(l.a,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,a){e.exports=a(101)},65:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.8ffb373f.chunk.js.map